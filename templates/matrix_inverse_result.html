<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Resultado Inversa</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background:linear-gradient(135deg,#000,#000);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}
    .container{background:#fff;border-radius:20px;box-shadow:0 20px 40px rgba(0,0,0,.1);padding:40px;max-width:980px;width:100%;animation:fadeIn .6s ease-out;text-align:center}
    @keyframes fadeIn{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}
    h1{color:#000;margin-bottom:20px;font-size:2.2em;font-weight:300}
    .section{background:#00000010;border-left:5px solid #000;border-radius:15px;padding:24px;margin:20px 0;text-align:center}
    .title{font-weight:600;margin-bottom:12px}
    .matrix-table{margin:0 auto;border-collapse:separate;border-spacing:8px}
    .cell{min-width:80px;text-align:center;padding:8px;background:#fff;border:1px solid #00000022;border-radius:6px}
    .grid{display:inline-block;text-align:left}
    .kv{display:flex;justify-content:space-between;gap:16px;margin:6px 0}
    .tag{font-weight:600}
    .ok{color:green;font-weight:600}
    .bad{color:#e74c3c;font-weight:600}
    .btn{background:#000;color:#fff;padding:12px 24px;border:none;border-radius:10px;font-size:1.05em;cursor:pointer;transition:.3s;margin-top:14px;text-decoration:none;display:inline-block}
    .btn:hover{transform:translateY(-2px);box-shadow:0 10px 20px rgba(0,0,0,.2)}
    .steps{max-height:520px;overflow:auto;text-align:left}
    .step{background:#fff;border-left:4px solid #000;padding:14px;border-radius:8px;margin:10px 0}
    .desc{font-weight:600;margin-bottom:8px}
    .row{display:flex;justify-content:center;margin:4px 0}
    .sep{display:flex;align-items:center;margin:0 8px;font-weight:700}
    .hidden{display:none}
    .toggle{background:#000;color:#fff;border:none;border-radius:8px;padding:10px 18px;cursor:pointer;margin:10px 0}
  </style>
</head>
<body>
  <div class="container">
    <h1>Inversa por Gauss-Jordan</h1>

    <div class="section">
      <div class="title">Clasificación</div>
      <div class="grid">
        <div class="kv"><span class="tag">Rango(A):</span><span>{{ rank }}</span></div>
        <div class="kv"><span class="tag">Dimensión (n):</span><span>{{ n }}</span></div>
        <div class="kv"><span class="tag">¿Invertible?</span>
          <span class="{{ 'ok' if invertible else 'bad' }}">{{ 'Sí' if invertible else 'No' }}</span>
        </div>
      </div>
    </div>

    <div class="section">
      <div class="title">Matriz A</div>
      <table class="matrix-table">
        {% for i in range(n) %}
        <tr>
          {% for j in range(n) %}
            <td class="cell">{{ A[i][j] | fmt_num }}</td>
          {% endfor %}
        </tr>
        {% endfor %}
      </table>
    </div>

    {% if invertible %}
      <div class="section">
        <div class="title">Matriz A⁻¹</div>
        <table class="matrix-table">
          {% for i in range(n) %}
          <tr>
            {% for j in range(n) %}
              <td class="cell">{{ Ainv[i][j] | fmt_num }}</td>
            {% endfor %}
          </tr>
          {% endfor %}
        </table>
      </div>
    {% else %}
      <div class="section">
        <div class="title">Mensaje</div>
        <div class="bad">{{ reason }}</div>
      </div>
    {% endif %}

    <div class="section">
      <div class="title">Propiedades teóricas (c)(d)(e)</div>
      <div class="grid">
        <div class="kv">
          <span class="tag">(c) A tiene n posiciones pivote:</span>
          <span class="{{ 'ok' if props.c.ok else 'bad' }}">{{ 'Verdadero' if props.c.ok else 'Falso' }}</span>
        </div>
        <div style="margin:4px 0;color:#7f8c8d">{{ props.c.text }}</div>

        <div class="kv">
          <span class="tag">(d) Ax = 0 tiene solo la solución trivial:</span>
          <span class="{{ 'ok' if props.d.ok else 'bad' }}">{{ 'Verdadero' if props.d.ok else 'Falso' }}</span>
        </div>
        <div style="margin:4px 0;color:#7f8c8d">{{ props.d.text }}</div>

        <div class="kv">
          <span class="tag">(e) Columnas de A son L.I.:</span>
          <span class="{{ 'ok' if props.e.ok else 'bad' }}">{{ 'Verdadero' if props.e.ok else 'Falso' }}</span>
        </div>
        <div style="margin:4px 0;color:#7f8c8d">{{ props.e.text }}</div>
      </div>
    </div>

    <div class="section">
      <div class="title">Proceso Gauss-Jordan (paso a paso)</div>
      <button class="toggle" onclick="document.getElementById('steps').classList.toggle('hidden')">
        Mostrar/Ocultar
      </button>
      <div id="steps" class="steps hidden">
        {% for s in steps %}
          <div class="step">
            <div class="desc">{{ s.description }}</div>
            <div>
              {% for i in range(s.matrix|length) %}
                <div class="row">
                  {% for j in range(s.matrix[i]|length) %}
                    <div class="cell">{{ s.matrix[i][j] }}</div>
                  {% endfor %}
                  <div class="sep">|</div>
                  <div class="cell">{{ s.results[i] }}</div>
                </div>
              {% endfor %}
            </div>
          </div>
        {% endfor %}
      </div>
    </div>

    <a href="{{ url_for('matrix_inverse') }}" class="btn">Nueva inversa</a>
    <a href="{{ url_for('home') }}" class="btn">Volver al Menú Principal</a>
  </div>
</body>
</html>
